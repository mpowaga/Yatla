/* TaskPreferences.c generated by valac 0.24.0, the Vala compiler
 * generated from TaskPreferences.vala, do not modify */


#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <granite.h>
#include <stdlib.h>
#include <string.h>
#include <stdio.h>
#include <float.h>
#include <math.h>


#define YATLA_TYPE_TASK_PREFERENCES (yatla_task_preferences_get_type ())
#define YATLA_TASK_PREFERENCES(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), YATLA_TYPE_TASK_PREFERENCES, YatlaTaskPreferences))
#define YATLA_TASK_PREFERENCES_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), YATLA_TYPE_TASK_PREFERENCES, YatlaTaskPreferencesClass))
#define YATLA_IS_TASK_PREFERENCES(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), YATLA_TYPE_TASK_PREFERENCES))
#define YATLA_IS_TASK_PREFERENCES_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), YATLA_TYPE_TASK_PREFERENCES))
#define YATLA_TASK_PREFERENCES_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), YATLA_TYPE_TASK_PREFERENCES, YatlaTaskPreferencesClass))

typedef struct _YatlaTaskPreferences YatlaTaskPreferences;
typedef struct _YatlaTaskPreferencesClass YatlaTaskPreferencesClass;
typedef struct _YatlaTaskPreferencesPrivate YatlaTaskPreferencesPrivate;

#define YATLA_TYPE_DATABASE (yatla_database_get_type ())
#define YATLA_DATABASE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), YATLA_TYPE_DATABASE, YatlaDatabase))
#define YATLA_DATABASE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), YATLA_TYPE_DATABASE, YatlaDatabaseClass))
#define YATLA_IS_DATABASE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), YATLA_TYPE_DATABASE))
#define YATLA_IS_DATABASE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), YATLA_TYPE_DATABASE))
#define YATLA_DATABASE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), YATLA_TYPE_DATABASE, YatlaDatabaseClass))

typedef struct _YatlaDatabase YatlaDatabase;
typedef struct _YatlaDatabaseClass YatlaDatabaseClass;

#define YATLA_TYPE_SIDEBAR (yatla_sidebar_get_type ())
#define YATLA_SIDEBAR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), YATLA_TYPE_SIDEBAR, YatlaSidebar))
#define YATLA_SIDEBAR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), YATLA_TYPE_SIDEBAR, YatlaSidebarClass))
#define YATLA_IS_SIDEBAR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), YATLA_TYPE_SIDEBAR))
#define YATLA_IS_SIDEBAR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), YATLA_TYPE_SIDEBAR))
#define YATLA_SIDEBAR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), YATLA_TYPE_SIDEBAR, YatlaSidebarClass))

typedef struct _YatlaSidebar YatlaSidebar;
typedef struct _YatlaSidebarClass YatlaSidebarClass;

#define YATLA_TYPE_LAYOUT (yatla_layout_get_type ())
#define YATLA_LAYOUT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), YATLA_TYPE_LAYOUT, YatlaLayout))
#define YATLA_LAYOUT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), YATLA_TYPE_LAYOUT, YatlaLayoutClass))
#define YATLA_IS_LAYOUT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), YATLA_TYPE_LAYOUT))
#define YATLA_IS_LAYOUT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), YATLA_TYPE_LAYOUT))
#define YATLA_LAYOUT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), YATLA_TYPE_LAYOUT, YatlaLayoutClass))

typedef struct _YatlaLayout YatlaLayout;
typedef struct _YatlaLayoutClass YatlaLayoutClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
typedef struct _Block7Data Block7Data;

#define YATLA_TYPE_TASK (yatla_task_get_type ())
#define YATLA_TASK(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), YATLA_TYPE_TASK, YatlaTask))
#define YATLA_TASK_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), YATLA_TYPE_TASK, YatlaTaskClass))
#define YATLA_IS_TASK(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), YATLA_TYPE_TASK))
#define YATLA_IS_TASK_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), YATLA_TYPE_TASK))
#define YATLA_TASK_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), YATLA_TYPE_TASK, YatlaTaskClass))

typedef struct _YatlaTask YatlaTask;
typedef struct _YatlaTaskClass YatlaTaskClass;
#define _g_date_time_unref0(var) ((var == NULL) ? NULL : (var = (g_date_time_unref (var), NULL)))

struct _YatlaTaskPreferences {
	GtkDialog parent_instance;
	YatlaTaskPreferencesPrivate * priv;
};

struct _YatlaTaskPreferencesClass {
	GtkDialogClass parent_class;
};

struct _YatlaTaskPreferencesPrivate {
	YatlaDatabase* _database;
	YatlaSidebar* _sidebar;
	YatlaLayout* _layout;
	GtkEntry* _name_entry;
	GtkEntry* _note_entry;
	GtkSwitch* _notification_switcher;
	GraniteWidgetsDatePicker* _date_picker;
	GraniteWidgetsTimePicker* _time_picker;
	gchar* _list_name;
	GtkButton* _create_button;
};

struct _Block7Data {
	int _ref_count_;
	YatlaTaskPreferences* self;
	GtkLabel* date_label;
	GtkLabel* time_label;
};


static gpointer yatla_task_preferences_parent_class = NULL;

GType yatla_task_preferences_get_type (void) G_GNUC_CONST;
GType yatla_database_get_type (void) G_GNUC_CONST;
GType yatla_sidebar_get_type (void) G_GNUC_CONST;
GType yatla_layout_get_type (void) G_GNUC_CONST;
#define YATLA_TASK_PREFERENCES_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), YATLA_TYPE_TASK_PREFERENCES, YatlaTaskPreferencesPrivate))
enum  {
	YATLA_TASK_PREFERENCES_DUMMY_PROPERTY
};
YatlaTaskPreferences* yatla_task_preferences_new (YatlaLayout* layout, YatlaDatabase* database, YatlaSidebar* sidebar, const gchar* task_name, const gchar* list_name);
YatlaTaskPreferences* yatla_task_preferences_construct (GType object_type, YatlaLayout* layout, YatlaDatabase* database, YatlaSidebar* sidebar, const gchar* task_name, const gchar* list_name);
static void yatla_task_preferences_create_widgets (YatlaTaskPreferences* self, const gchar* task_name);
static void yatla_task_preferences_connect_signals (YatlaTaskPreferences* self);
static Block7Data* block7_data_ref (Block7Data* _data7_);
static void block7_data_unref (void * _userdata_);
static GtkLabel* yatla_task_preferences_create_preferences_label (const gchar* text);
static void __lambda6_ (Block7Data* _data7_);
static void ___lambda6__g_object_notify (GObject* _sender, GParamSpec* pspec, gpointer self);
static void __lambda7_ (YatlaTaskPreferences* self);
static void ___lambda7__g_object_notify (GObject* _sender, GParamSpec* pspec, gpointer self);
static void __lambda8_ (YatlaTaskPreferences* self);
static void ___lambda8__granite_widgets_time_picker_time_changed (GraniteWidgetsTimePicker* _sender, gpointer self);
static void __lambda9_ (YatlaTaskPreferences* self);
static void ___lambda9__gtk_editable_changed (GtkEditable* _sender, gpointer self);
static void __lambda10_ (YatlaTaskPreferences* self, gint response_id);
static void yatla_task_preferences_on_create_button_clicked (YatlaTaskPreferences* self);
static void ___lambda10__gtk_dialog_response (GtkDialog* _sender, gint response_id, gpointer self);
GType yatla_task_get_type (void) G_GNUC_CONST;
YatlaTask* yatla_task_new (const gchar* name, const gchar* note, GDateTime* date, gboolean is_done);
YatlaTask* yatla_task_construct (GType object_type, const gchar* name, const gchar* note, GDateTime* date, gboolean is_done);
gboolean yatla_database_add_task (YatlaDatabase* self, YatlaTask* task, const gchar* list_name);
void yatla_sidebar_add_task (YatlaSidebar* self, YatlaDatabase* database, const gchar* list_name, YatlaTask* task);
void yatla_layout_reset_layout (YatlaLayout* self, YatlaDatabase* database, YatlaSidebar* sidebar);
static void yatla_task_preferences_finalize (GObject* obj);


/** index is the index in sidebar.sidebar_list */
static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


YatlaTaskPreferences* yatla_task_preferences_construct (GType object_type, YatlaLayout* layout, YatlaDatabase* database, YatlaSidebar* sidebar, const gchar* task_name, const gchar* list_name) {
	YatlaTaskPreferences * self = NULL;
	YatlaDatabase* _tmp0_ = NULL;
	YatlaDatabase* _tmp1_ = NULL;
	YatlaSidebar* _tmp2_ = NULL;
	YatlaSidebar* _tmp3_ = NULL;
	YatlaLayout* _tmp4_ = NULL;
	YatlaLayout* _tmp5_ = NULL;
	const gchar* _tmp6_ = NULL;
	gchar* _tmp7_ = NULL;
	const gchar* _tmp8_ = NULL;
	g_return_val_if_fail (layout != NULL, NULL);
	g_return_val_if_fail (database != NULL, NULL);
	g_return_val_if_fail (sidebar != NULL, NULL);
	g_return_val_if_fail (task_name != NULL, NULL);
	g_return_val_if_fail (list_name != NULL, NULL);
	self = (YatlaTaskPreferences*) g_object_new (object_type, NULL);
	gtk_window_set_title ((GtkWindow*) self, "Create you task");
	gtk_container_set_border_width ((GtkContainer*) self, (guint) 5);
	gtk_window_set_resizable ((GtkWindow*) self, FALSE);
	g_object_set ((GtkWindow*) self, "window-position", GTK_WIN_POS_CENTER, NULL);
	_tmp0_ = database;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->_database);
	self->priv->_database = _tmp1_;
	_tmp2_ = sidebar;
	_tmp3_ = _g_object_ref0 (_tmp2_);
	_g_object_unref0 (self->priv->_sidebar);
	self->priv->_sidebar = _tmp3_;
	_tmp4_ = layout;
	_tmp5_ = _g_object_ref0 (_tmp4_);
	_g_object_unref0 (self->priv->_layout);
	self->priv->_layout = _tmp5_;
	_tmp6_ = list_name;
	_tmp7_ = g_strdup (_tmp6_);
	_g_free0 (self->priv->_list_name);
	self->priv->_list_name = _tmp7_;
	_tmp8_ = task_name;
	yatla_task_preferences_create_widgets (self, _tmp8_);
	yatla_task_preferences_connect_signals (self);
	gtk_widget_show_all ((GtkWidget*) self);
	return self;
}


YatlaTaskPreferences* yatla_task_preferences_new (YatlaLayout* layout, YatlaDatabase* database, YatlaSidebar* sidebar, const gchar* task_name, const gchar* list_name) {
	return yatla_task_preferences_construct (YATLA_TYPE_TASK_PREFERENCES, layout, database, sidebar, task_name, list_name);
}


static Block7Data* block7_data_ref (Block7Data* _data7_) {
	g_atomic_int_inc (&_data7_->_ref_count_);
	return _data7_;
}


static void block7_data_unref (void * _userdata_) {
	Block7Data* _data7_;
	_data7_ = (Block7Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data7_->_ref_count_)) {
		YatlaTaskPreferences* self;
		self = _data7_->self;
		_g_object_unref0 (_data7_->time_label);
		_g_object_unref0 (_data7_->date_label);
		_g_object_unref0 (self);
		g_slice_free (Block7Data, _data7_);
	}
}


static void __lambda6_ (Block7Data* _data7_) {
	YatlaTaskPreferences* self;
	GtkSwitch* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	self = _data7_->self;
	_tmp0_ = self->priv->_notification_switcher;
	_tmp1_ = gtk_switch_get_active (_tmp0_);
	_tmp2_ = _tmp1_;
	if (_tmp2_) {
		GraniteWidgetsDatePicker* _tmp3_ = NULL;
		GraniteWidgetsTimePicker* _tmp4_ = NULL;
		gtk_widget_set_sensitive ((GtkWidget*) _data7_->date_label, TRUE);
		_tmp3_ = self->priv->_date_picker;
		gtk_widget_set_sensitive ((GtkWidget*) _tmp3_, TRUE);
		gtk_widget_set_sensitive ((GtkWidget*) _data7_->time_label, TRUE);
		_tmp4_ = self->priv->_time_picker;
		gtk_widget_set_sensitive ((GtkWidget*) _tmp4_, TRUE);
	} else {
		GraniteWidgetsDatePicker* _tmp5_ = NULL;
		GraniteWidgetsTimePicker* _tmp6_ = NULL;
		gtk_widget_set_sensitive ((GtkWidget*) _data7_->date_label, FALSE);
		_tmp5_ = self->priv->_date_picker;
		gtk_widget_set_sensitive ((GtkWidget*) _tmp5_, FALSE);
		gtk_widget_set_sensitive ((GtkWidget*) _data7_->time_label, FALSE);
		_tmp6_ = self->priv->_time_picker;
		gtk_widget_set_sensitive ((GtkWidget*) _tmp6_, FALSE);
	}
}


static void ___lambda6__g_object_notify (GObject* _sender, GParamSpec* pspec, gpointer self) {
	__lambda6_ (self);
}


static void __lambda7_ (YatlaTaskPreferences* self) {
	FILE* _tmp0_ = NULL;
	_tmp0_ = stdout;
	fprintf (_tmp0_, "date was changed\n");
}


static void ___lambda7__g_object_notify (GObject* _sender, GParamSpec* pspec, gpointer self) {
	__lambda7_ ((YatlaTaskPreferences*) self);
}


static void __lambda8_ (YatlaTaskPreferences* self) {
	FILE* _tmp0_ = NULL;
	_tmp0_ = stdout;
	fprintf (_tmp0_, "time was changed\n");
}


static void ___lambda8__granite_widgets_time_picker_time_changed (GraniteWidgetsTimePicker* _sender, gpointer self) {
	__lambda8_ ((YatlaTaskPreferences*) self);
}


static void yatla_task_preferences_create_widgets (YatlaTaskPreferences* self, const gchar* task_name) {
	Block7Data* _data7_;
	GtkGrid* content = NULL;
	GtkGrid* _tmp0_ = NULL;
	GtkLabel* name_label = NULL;
	GtkLabel* _tmp1_ = NULL;
	GtkEntry* _tmp2_ = NULL;
	GtkEntry* _tmp3_ = NULL;
	GtkEntry* _tmp4_ = NULL;
	const gchar* _tmp5_ = NULL;
	GtkLabel* note_label = NULL;
	GtkLabel* _tmp6_ = NULL;
	GtkEntry* _tmp7_ = NULL;
	GtkEntry* _tmp8_ = NULL;
	GtkLabel* notification_label = NULL;
	GtkLabel* _tmp9_ = NULL;
	GtkSwitch* _tmp10_ = NULL;
	GtkSwitch* _tmp11_ = NULL;
	GtkBox* box = NULL;
	GtkBox* _tmp12_ = NULL;
	GtkSwitch* _tmp13_ = NULL;
	GtkLabel* _tmp14_ = NULL;
	GraniteWidgetsDatePicker* _tmp15_ = NULL;
	GtkLabel* _tmp16_ = NULL;
	GraniteWidgetsTimePicker* _tmp17_ = NULL;
	GtkEntry* _tmp18_ = NULL;
	GtkEntry* _tmp19_ = NULL;
	GraniteWidgetsDatePicker* _tmp20_ = NULL;
	GraniteWidgetsTimePicker* _tmp21_ = NULL;
	GtkSwitch* _tmp22_ = NULL;
	GraniteWidgetsDatePicker* _tmp23_ = NULL;
	GraniteWidgetsTimePicker* _tmp24_ = NULL;
	GtkBox* _tmp25_ = NULL;
	GtkWidget* _tmp26_ = NULL;
	GtkButton* _tmp27_ = NULL;
	GtkButton* _tmp28_ = NULL;
	GtkEntry* _tmp29_ = NULL;
	const gchar* _tmp30_ = NULL;
	const gchar* _tmp31_ = NULL;
	GtkWidget* _tmp32_ = NULL;
	GtkWidget* _tmp33_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (task_name != NULL);
	_data7_ = g_slice_new0 (Block7Data);
	_data7_->_ref_count_ = 1;
	_data7_->self = g_object_ref (self);
	_tmp0_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp0_);
	content = _tmp0_;
	_tmp1_ = yatla_task_preferences_create_preferences_label ("Name:");
	name_label = _tmp1_;
	_tmp2_ = (GtkEntry*) gtk_entry_new ();
	g_object_ref_sink (_tmp2_);
	_g_object_unref0 (self->priv->_name_entry);
	self->priv->_name_entry = _tmp2_;
	_tmp3_ = self->priv->_name_entry;
	gtk_entry_set_placeholder_text (_tmp3_, "Name of the Task");
	_tmp4_ = self->priv->_name_entry;
	_tmp5_ = task_name;
	gtk_entry_set_text (_tmp4_, _tmp5_);
	_tmp6_ = yatla_task_preferences_create_preferences_label ("Note:");
	note_label = _tmp6_;
	_tmp7_ = (GtkEntry*) gtk_entry_new ();
	g_object_ref_sink (_tmp7_);
	_g_object_unref0 (self->priv->_note_entry);
	self->priv->_note_entry = _tmp7_;
	_tmp8_ = self->priv->_note_entry;
	gtk_entry_set_placeholder_text (_tmp8_, "Additional information");
	_tmp9_ = yatla_task_preferences_create_preferences_label ("Notification:");
	notification_label = _tmp9_;
	_tmp10_ = (GtkSwitch*) gtk_switch_new ();
	g_object_ref_sink (_tmp10_);
	_g_object_unref0 (self->priv->_notification_switcher);
	self->priv->_notification_switcher = _tmp10_;
	_tmp11_ = self->priv->_notification_switcher;
	gtk_switch_set_active (_tmp11_, TRUE);
	_tmp12_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_HORIZONTAL, 20);
	g_object_ref_sink (_tmp12_);
	box = _tmp12_;
	gtk_box_pack_start (box, (GtkWidget*) notification_label, TRUE, TRUE, (guint) 0);
	_tmp13_ = self->priv->_notification_switcher;
	gtk_box_pack_start (box, (GtkWidget*) _tmp13_, TRUE, TRUE, (guint) 0);
	_tmp14_ = yatla_task_preferences_create_preferences_label ("Date:");
	_data7_->date_label = _tmp14_;
	_tmp15_ = granite_widgets_date_picker_new_with_format ("%d/%m/%Y");
	g_object_ref_sink (_tmp15_);
	_g_object_unref0 (self->priv->_date_picker);
	self->priv->_date_picker = _tmp15_;
	_tmp16_ = yatla_task_preferences_create_preferences_label ("Time:");
	_data7_->time_label = _tmp16_;
	_tmp17_ = granite_widgets_time_picker_new ();
	g_object_ref_sink (_tmp17_);
	_g_object_unref0 (self->priv->_time_picker);
	self->priv->_time_picker = _tmp17_;
	gtk_grid_attach (content, (GtkWidget*) name_label, 0, 2, 1, 1);
	_tmp18_ = self->priv->_name_entry;
	gtk_grid_attach (content, (GtkWidget*) _tmp18_, 0, 3, 1, 1);
	gtk_grid_attach (content, (GtkWidget*) note_label, 1, 2, 1, 1);
	_tmp19_ = self->priv->_note_entry;
	gtk_grid_attach (content, (GtkWidget*) _tmp19_, 1, 3, 1, 1);
	gtk_grid_attach (content, (GtkWidget*) box, 0, 4, 1, 1);
	gtk_grid_attach (content, (GtkWidget*) _data7_->date_label, 0, 6, 1, 1);
	_tmp20_ = self->priv->_date_picker;
	gtk_grid_attach (content, (GtkWidget*) _tmp20_, 0, 8, 1, 1);
	gtk_grid_attach (content, (GtkWidget*) _data7_->time_label, 1, 6, 1, 1);
	_tmp21_ = self->priv->_time_picker;
	gtk_grid_attach (content, (GtkWidget*) _tmp21_, 1, 8, 1, 1);
	gtk_grid_set_column_spacing (content, (guint) 20);
	gtk_grid_set_row_spacing (content, (guint) 10);
	gtk_widget_set_margin_left ((GtkWidget*) content, 10);
	gtk_widget_set_margin_right ((GtkWidget*) content, 10);
	gtk_widget_set_margin_bottom ((GtkWidget*) content, 5);
	_tmp22_ = self->priv->_notification_switcher;
	g_signal_connect_data ((GObject*) _tmp22_, "notify::active", (GCallback) ___lambda6__g_object_notify, block7_data_ref (_data7_), (GClosureNotify) block7_data_unref, 0);
	_tmp23_ = self->priv->_date_picker;
	g_signal_connect_object ((GObject*) _tmp23_, "notify::date", (GCallback) ___lambda7__g_object_notify, self, 0);
	_tmp24_ = self->priv->_time_picker;
	g_signal_connect_object (_tmp24_, "time-changed", (GCallback) ___lambda8__granite_widgets_time_picker_time_changed, self, 0);
	_tmp25_ = (GtkBox*) gtk_dialog_get_content_area ((GtkDialog*) self);
	gtk_container_add ((GtkContainer*) _tmp25_, (GtkWidget*) content);
	gtk_dialog_add_button ((GtkDialog*) self, "_Close", (gint) GTK_RESPONSE_CLOSE);
	_tmp26_ = gtk_dialog_add_button ((GtkDialog*) self, "_Create", (gint) GTK_RESPONSE_APPLY);
	_tmp27_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp26_, GTK_TYPE_BUTTON) ? ((GtkButton*) _tmp26_) : NULL);
	_g_object_unref0 (self->priv->_create_button);
	self->priv->_create_button = _tmp27_;
	_tmp28_ = self->priv->_create_button;
	_tmp29_ = self->priv->_name_entry;
	_tmp30_ = gtk_entry_get_text (_tmp29_);
	_tmp31_ = _tmp30_;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp28_, g_strcmp0 (_tmp31_, "") != 0);
	_tmp32_ = gtk_dialog_get_action_area ((GtkDialog*) self);
	gtk_button_box_set_layout (G_TYPE_CHECK_INSTANCE_TYPE (_tmp32_, GTK_TYPE_BUTTON_BOX) ? ((GtkButtonBox*) _tmp32_) : NULL, GTK_BUTTONBOX_CENTER);
	_tmp33_ = gtk_dialog_get_action_area ((GtkDialog*) self);
	gtk_box_set_spacing ((GtkBox*) (G_TYPE_CHECK_INSTANCE_TYPE (_tmp33_, GTK_TYPE_BUTTON_BOX) ? ((GtkButtonBox*) _tmp33_) : NULL), 170);
	_g_object_unref0 (box);
	_g_object_unref0 (notification_label);
	_g_object_unref0 (note_label);
	_g_object_unref0 (name_label);
	_g_object_unref0 (content);
	block7_data_unref (_data7_);
	_data7_ = NULL;
}


static GtkLabel* yatla_task_preferences_create_preferences_label (const gchar* text) {
	GtkLabel* result = NULL;
	GtkLabel* label = NULL;
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	gchar* _tmp2_ = NULL;
	GtkLabel* _tmp3_ = NULL;
	GtkLabel* _tmp4_ = NULL;
	g_return_val_if_fail (text != NULL, NULL);
	_tmp0_ = text;
	_tmp1_ = g_strdup_printf ("<span weight='bold'>%s</span>", _tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = (GtkLabel*) gtk_label_new (_tmp2_);
	g_object_ref_sink (_tmp3_);
	_tmp4_ = _tmp3_;
	_g_free0 (_tmp2_);
	label = _tmp4_;
	gtk_label_set_use_markup (label, TRUE);
	gtk_misc_set_alignment ((GtkMisc*) label, 0.0f, 0.5f);
	result = label;
	return result;
}


static void __lambda9_ (YatlaTaskPreferences* self) {
	GtkButton* _tmp0_ = NULL;
	GtkEntry* _tmp1_ = NULL;
	const gchar* _tmp2_ = NULL;
	const gchar* _tmp3_ = NULL;
	_tmp0_ = self->priv->_create_button;
	_tmp1_ = self->priv->_name_entry;
	_tmp2_ = gtk_entry_get_text (_tmp1_);
	_tmp3_ = _tmp2_;
	gtk_widget_set_sensitive ((GtkWidget*) _tmp0_, g_strcmp0 (_tmp3_, "") != 0);
}


static void ___lambda9__gtk_editable_changed (GtkEditable* _sender, gpointer self) {
	__lambda9_ ((YatlaTaskPreferences*) self);
}


static void __lambda10_ (YatlaTaskPreferences* self, gint response_id) {
	gint _tmp0_ = 0;
	_tmp0_ = response_id;
	switch (_tmp0_) {
		case GTK_RESPONSE_APPLY:
		{
			yatla_task_preferences_on_create_button_clicked (self);
			break;
		}
		case GTK_RESPONSE_CLOSE:
		{
			gtk_widget_destroy ((GtkWidget*) self);
			break;
		}
		default:
		break;
	}
}


static void ___lambda10__gtk_dialog_response (GtkDialog* _sender, gint response_id, gpointer self) {
	__lambda10_ ((YatlaTaskPreferences*) self, response_id);
}


static void yatla_task_preferences_connect_signals (YatlaTaskPreferences* self) {
	GtkEntry* _tmp0_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->_name_entry;
	g_signal_connect_object ((GtkEditable*) _tmp0_, "changed", (GCallback) ___lambda9__gtk_editable_changed, self, 0);
	g_signal_connect_object ((GtkDialog*) self, "response", (GCallback) ___lambda10__gtk_dialog_response, self, 0);
}


static void yatla_task_preferences_on_create_button_clicked (YatlaTaskPreferences* self) {
	YatlaTask* task = NULL;
	GtkSwitch* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	YatlaDatabase* _tmp39_ = NULL;
	YatlaTask* _tmp40_ = NULL;
	const gchar* _tmp41_ = NULL;
	YatlaSidebar* _tmp42_ = NULL;
	YatlaDatabase* _tmp43_ = NULL;
	const gchar* _tmp44_ = NULL;
	YatlaTask* _tmp45_ = NULL;
	YatlaLayout* _tmp46_ = NULL;
	YatlaDatabase* _tmp47_ = NULL;
	YatlaSidebar* _tmp48_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->_notification_switcher;
	_tmp1_ = gtk_switch_get_active (_tmp0_);
	_tmp2_ = _tmp1_;
	if (_tmp2_) {
		GDateTime* date = NULL;
		GraniteWidgetsDatePicker* _tmp3_ = NULL;
		GDateTime* _tmp4_ = NULL;
		GDateTime* _tmp5_ = NULL;
		gint _tmp6_ = 0;
		GraniteWidgetsDatePicker* _tmp7_ = NULL;
		GDateTime* _tmp8_ = NULL;
		GDateTime* _tmp9_ = NULL;
		gint _tmp10_ = 0;
		GraniteWidgetsDatePicker* _tmp11_ = NULL;
		GDateTime* _tmp12_ = NULL;
		GDateTime* _tmp13_ = NULL;
		gint _tmp14_ = 0;
		GraniteWidgetsTimePicker* _tmp15_ = NULL;
		GDateTime* _tmp16_ = NULL;
		GDateTime* _tmp17_ = NULL;
		gint _tmp18_ = 0;
		GraniteWidgetsTimePicker* _tmp19_ = NULL;
		GDateTime* _tmp20_ = NULL;
		GDateTime* _tmp21_ = NULL;
		gint _tmp22_ = 0;
		GDateTime* _tmp23_ = NULL;
		GtkEntry* _tmp24_ = NULL;
		const gchar* _tmp25_ = NULL;
		const gchar* _tmp26_ = NULL;
		GtkEntry* _tmp27_ = NULL;
		const gchar* _tmp28_ = NULL;
		const gchar* _tmp29_ = NULL;
		GDateTime* _tmp30_ = NULL;
		YatlaTask* _tmp31_ = NULL;
		_tmp3_ = self->priv->_date_picker;
		_tmp4_ = granite_widgets_date_picker_get_date (_tmp3_);
		_tmp5_ = _tmp4_;
		_tmp6_ = g_date_time_get_year (_tmp5_);
		_tmp7_ = self->priv->_date_picker;
		_tmp8_ = granite_widgets_date_picker_get_date (_tmp7_);
		_tmp9_ = _tmp8_;
		_tmp10_ = g_date_time_get_month (_tmp9_);
		_tmp11_ = self->priv->_date_picker;
		_tmp12_ = granite_widgets_date_picker_get_date (_tmp11_);
		_tmp13_ = _tmp12_;
		_tmp14_ = g_date_time_get_day_of_month (_tmp13_);
		_tmp15_ = self->priv->_time_picker;
		_tmp16_ = granite_widgets_time_picker_get_time (_tmp15_);
		_tmp17_ = _tmp16_;
		_tmp18_ = g_date_time_get_hour (_tmp17_);
		_tmp19_ = self->priv->_time_picker;
		_tmp20_ = granite_widgets_time_picker_get_time (_tmp19_);
		_tmp21_ = _tmp20_;
		_tmp22_ = g_date_time_get_minute (_tmp21_);
		_tmp23_ = g_date_time_new_local (_tmp6_, _tmp10_, _tmp14_, _tmp18_, _tmp22_, (gdouble) 0);
		date = _tmp23_;
		_tmp24_ = self->priv->_name_entry;
		_tmp25_ = gtk_entry_get_text (_tmp24_);
		_tmp26_ = _tmp25_;
		_tmp27_ = self->priv->_note_entry;
		_tmp28_ = gtk_entry_get_text (_tmp27_);
		_tmp29_ = _tmp28_;
		_tmp30_ = date;
		_tmp31_ = yatla_task_new (_tmp26_, _tmp29_, _tmp30_, FALSE);
		_g_object_unref0 (task);
		task = _tmp31_;
		_g_date_time_unref0 (date);
	} else {
		GtkEntry* _tmp32_ = NULL;
		const gchar* _tmp33_ = NULL;
		const gchar* _tmp34_ = NULL;
		GtkEntry* _tmp35_ = NULL;
		const gchar* _tmp36_ = NULL;
		const gchar* _tmp37_ = NULL;
		YatlaTask* _tmp38_ = NULL;
		_tmp32_ = self->priv->_name_entry;
		_tmp33_ = gtk_entry_get_text (_tmp32_);
		_tmp34_ = _tmp33_;
		_tmp35_ = self->priv->_note_entry;
		_tmp36_ = gtk_entry_get_text (_tmp35_);
		_tmp37_ = _tmp36_;
		_tmp38_ = yatla_task_new (_tmp34_, _tmp37_, NULL, FALSE);
		_g_object_unref0 (task);
		task = _tmp38_;
	}
	_tmp39_ = self->priv->_database;
	_tmp40_ = task;
	_tmp41_ = self->priv->_list_name;
	yatla_database_add_task (_tmp39_, _tmp40_, _tmp41_);
	_tmp42_ = self->priv->_sidebar;
	_tmp43_ = self->priv->_database;
	_tmp44_ = self->priv->_list_name;
	_tmp45_ = task;
	yatla_sidebar_add_task (_tmp42_, _tmp43_, _tmp44_, _tmp45_);
	_tmp46_ = self->priv->_layout;
	_tmp47_ = self->priv->_database;
	_tmp48_ = self->priv->_sidebar;
	yatla_layout_reset_layout (_tmp46_, _tmp47_, _tmp48_);
	gtk_widget_destroy ((GtkWidget*) self);
	_g_object_unref0 (task);
}


static void yatla_task_preferences_class_init (YatlaTaskPreferencesClass * klass) {
	yatla_task_preferences_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (YatlaTaskPreferencesPrivate));
	G_OBJECT_CLASS (klass)->finalize = yatla_task_preferences_finalize;
}


static void yatla_task_preferences_instance_init (YatlaTaskPreferences * self) {
	self->priv = YATLA_TASK_PREFERENCES_GET_PRIVATE (self);
}


static void yatla_task_preferences_finalize (GObject* obj) {
	YatlaTaskPreferences * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, YATLA_TYPE_TASK_PREFERENCES, YatlaTaskPreferences);
	_g_object_unref0 (self->priv->_database);
	_g_object_unref0 (self->priv->_sidebar);
	_g_object_unref0 (self->priv->_layout);
	_g_object_unref0 (self->priv->_name_entry);
	_g_object_unref0 (self->priv->_note_entry);
	_g_object_unref0 (self->priv->_notification_switcher);
	_g_object_unref0 (self->priv->_date_picker);
	_g_object_unref0 (self->priv->_time_picker);
	_g_free0 (self->priv->_list_name);
	_g_object_unref0 (self->priv->_create_button);
	G_OBJECT_CLASS (yatla_task_preferences_parent_class)->finalize (obj);
}


GType yatla_task_preferences_get_type (void) {
	static volatile gsize yatla_task_preferences_type_id__volatile = 0;
	if (g_once_init_enter (&yatla_task_preferences_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (YatlaTaskPreferencesClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) yatla_task_preferences_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (YatlaTaskPreferences), 0, (GInstanceInitFunc) yatla_task_preferences_instance_init, NULL };
		GType yatla_task_preferences_type_id;
		yatla_task_preferences_type_id = g_type_register_static (GTK_TYPE_DIALOG, "YatlaTaskPreferences", &g_define_type_info, 0);
		g_once_init_leave (&yatla_task_preferences_type_id__volatile, yatla_task_preferences_type_id);
	}
	return yatla_task_preferences_type_id__volatile;
}



